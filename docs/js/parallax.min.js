let viewportTop=document.documentElement.clientHeight,parallaxParent=(768<window.innerWidth&&window.addEventListener("scroll",parallax),document.querySelectorAll("[data-parallax-parent]")),parallaxElement=document.querySelectorAll("[data-parallax-element]"),smallerElement,smallerElementHeight,smallerElementSpeed,parentHeight,heightDifference,tranfsorm,currentTransform;function parallax(e){parallaxParent.forEach(e=>{e.getBoundingClientRect().top<=+viewportTop&&(smallerElement=e.firstElementChild.getBoundingClientRect().height>e.firstElementChild.nextElementSibling.getBoundingClientRect().height?e.firstElementChild.nextElementSibling:e.firstElementChild,console.clear(),console.log(e.getBoundingClientRect().top),console.log("Прокрутка сверху = "+window.pageYOffset),parentHeight=e.getBoundingClientRect().height,console.log("Высота родителя = "+parentHeight),smallerElementHeight=smallerElement.getBoundingClientRect().height,console.log("Высота блока = "+smallerElementHeight),heightDifference=parentHeight-smallerElementHeight,console.log("Разница высот = "+heightDifference),smallerElementSpeed=parentHeight/heightDifference,console.log("Скорость сдвига = "+smallerElementSpeed),tranfsorm=window.pageYOffset/smallerElementSpeed,currentTransform=parseInt(smallerElement.style.transform.match(/[-0-9.]+(?=px)/)),console.log("Текущий трансформ = "+currentTransform),currentTransform<heightDifference||window.pageYOffset<heightDifference||window.pageYOffset<currentTransform)&&window.pageYOffset<parentHeight&&(smallerElement.style.transform=`translateY(${tranfsorm}px)`)})}console.log(parallaxElement),parallaxElement.forEach(e=>{e.style.transform="translateY(0px)"}),parallax();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyYWxsYXgubWluLmpzIiwic291cmNlcyI6WyJwYXJhbGxheC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgdmlld3BvcnRUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XG4gICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBwYXJhbGxheCk7XG59XG5sZXQgcGFyYWxsYXhQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtcGFyYWxsYXgtcGFyZW50XVwiKTtcbmxldCBwYXJhbGxheEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtcGFyYWxsYXgtZWxlbWVudF1cIik7XG5sZXQgc21hbGxlckVsZW1lbnQ7XG5sZXQgc21hbGxlckVsZW1lbnRIZWlnaHQ7XG5sZXQgc21hbGxlckVsZW1lbnRTcGVlZDtcbmxldCBwYXJlbnRIZWlnaHQ7XG5sZXQgaGVpZ2h0RGlmZmVyZW5jZTtcbmxldCB0cmFuZnNvcm07XG5sZXQgY3VycmVudFRyYW5zZm9ybTtcbmNvbnNvbGUubG9nKHBhcmFsbGF4RWxlbWVudCk7XG5cbnBhcmFsbGF4RWxlbWVudC5mb3JFYWNoKChlbCkgPT4ge1xuICAgZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVZKDBweClcIjtcbn0pO1xucGFyYWxsYXgoKTtcbmZ1bmN0aW9uIHBhcmFsbGF4KGUpIHtcbiAgIHBhcmFsbGF4UGFyZW50LmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBpZiAoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDw9IHZpZXdwb3J0VG9wIC8gMSkge1xuICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZWwuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ID5cbiAgICAgICAgICAgIGVsLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHRcbiAgICAgICAgICkge1xuICAgICAgICAgICAgc21hbGxlckVsZW1lbnQgPSBlbC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc21hbGxlckVsZW1lbnQgPSBlbC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgIH1cbiAgICAgICAgIGNvbnNvbGUuY2xlYXIoKTtcbiAgICAgICAgIGNvbnNvbGUubG9nKGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCk7XG4gICAgICAgICBjb25zb2xlLmxvZyhcItCf0YDQvtC60YDRg9GC0LrQsCDRgdCy0LXRgNGF0YMgPSBcIiArIHdpbmRvdy5wYWdlWU9mZnNldCk7XG4gICAgICAgICAvLyBjb25zb2xlLmxvZyhcItCS0YvRgdC+0YLQsCDQstGM0Y7Qv9C+0YDRgtCwID0gXCIgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgIHBhcmVudEhlaWdodCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgIGNvbnNvbGUubG9nKFwi0JLRi9GB0L7RgtCwINGA0L7QtNC40YLQtdC70Y8gPSBcIiArIHBhcmVudEhlaWdodCk7XG4gICAgICAgICBzbWFsbGVyRWxlbWVudEhlaWdodCA9IHNtYWxsZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgIGNvbnNvbGUubG9nKFwi0JLRi9GB0L7RgtCwINCx0LvQvtC60LAgPSBcIiArIHNtYWxsZXJFbGVtZW50SGVpZ2h0KTtcbiAgICAgICAgIGhlaWdodERpZmZlcmVuY2UgPSBwYXJlbnRIZWlnaHQgLSBzbWFsbGVyRWxlbWVudEhlaWdodDtcbiAgICAgICAgIGNvbnNvbGUubG9nKFwi0KDQsNC30L3QuNGG0LAg0LLRi9GB0L7RgiA9IFwiICsgaGVpZ2h0RGlmZmVyZW5jZSk7XG4gICAgICAgICBzbWFsbGVyRWxlbWVudFNwZWVkID0gcGFyZW50SGVpZ2h0IC8gaGVpZ2h0RGlmZmVyZW5jZTtcbiAgICAgICAgIGNvbnNvbGUubG9nKFwi0KHQutC+0YDQvtGB0YLRjCDRgdC00LLQuNCz0LAgPSBcIiArIHNtYWxsZXJFbGVtZW50U3BlZWQpO1xuICAgICAgICAgdHJhbmZzb3JtID0gd2luZG93LnBhZ2VZT2Zmc2V0IC8gc21hbGxlckVsZW1lbnRTcGVlZDtcbiAgICAgICAgIGN1cnJlbnRUcmFuc2Zvcm0gPSBwYXJzZUludChzbWFsbGVyRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0ubWF0Y2goL1stMC05Ll0rKD89cHgpLykpO1xuICAgICAgICAgY29uc29sZS5sb2coXCLQotC10LrRg9GJ0LjQuSDRgtGA0LDQvdGB0YTQvtGA0LwgPSBcIiArIGN1cnJlbnRUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAvLyAhIERvbmVcbiAgICAgICAgIGlmIChcbiAgICAgICAgICAgIChjdXJyZW50VHJhbnNmb3JtIDwgaGVpZ2h0RGlmZmVyZW5jZSB8fFxuICAgICAgICAgICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0IDwgaGVpZ2h0RGlmZmVyZW5jZSB8fFxuICAgICAgICAgICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0IDwgY3VycmVudFRyYW5zZm9ybSkgJiZcbiAgICAgICAgICAgIHdpbmRvdy5wYWdlWU9mZnNldCA8IHBhcmVudEhlaWdodFxuICAgICAgICAgKSB7XG4gICAgICAgICAgICBzbWFsbGVyRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgke3RyYW5mc29ybX1weClgO1xuICAgICAgICAgfVxuICAgICAgfVxuICAgfSk7XG59XG4iXSwibmFtZXMiOlsibGV0Iiwidmlld3BvcnRUb3AiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsInBhcmFsbGF4UGFyZW50Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXJhbGxheCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJhbGxheEVsZW1lbnQiLCJzbWFsbGVyRWxlbWVudCIsInNtYWxsZXJFbGVtZW50SGVpZ2h0Iiwic21hbGxlckVsZW1lbnRTcGVlZCIsInBhcmVudEhlaWdodCIsImhlaWdodERpZmZlcmVuY2UiLCJ0cmFuZnNvcm0iLCJjdXJyZW50VHJhbnNmb3JtIiwiZSIsImZvckVhY2giLCJlbCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImZpcnN0RWxlbWVudENoaWxkIiwiaGVpZ2h0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiY29uc29sZSIsImNsZWFyIiwibG9nIiwicGFnZVlPZmZzZXQiLCJwYXJzZUludCIsInN0eWxlIiwidHJhbnNmb3JtIiwibWF0Y2giXSwibWFwcGluZ3MiOiJBQUFBQSxJQUFJQyxZQUFjQyxTQUFTQyxnQkFBZ0JDLGFBSXZDQyxnQkFIb0IsSUFBcEJDLE9BQU9DLFlBQ1JELE9BQU9FLGlCQUFpQixTQUFVQyxRQUFRLEVBRXhCUCxTQUFTUSxpQkFBaUIsd0JBQXdCLEdBQ25FQyxnQkFBa0JULFNBQVNRLGlCQUFpQix5QkFBeUIsRUFDckVFLGVBQ0FDLHFCQUNBQyxvQkFDQUMsYUFDQUMsaUJBQ0FDLFVBQ0FDLGlCQU9KLFNBQVNULFNBQVNVLEdBQ2ZkLGVBQWVlLFFBQVEsSUFDaEJDLEVBQUdDLHNCQUFzQixFQUFFQyxLQUFPdEIsQ0FBQUEsY0FLaENXLGVBSEFTLEVBQUdHLGtCQUFrQkYsc0JBQXNCLEVBQUVHLE9BQzdDSixFQUFHRyxrQkFBa0JFLG1CQUFtQkosc0JBQXNCLEVBQUVHLE9BRS9DSixFQUFHRyxrQkFBa0JFLG1CQUVyQkwsRUFBR0csa0JBRXZCRyxRQUFRQyxNQUFNLEVBQ2RELFFBQVFFLElBQUlSLEVBQUdDLHNCQUFzQixFQUFFQyxHQUFHLEVBQzFDSSxRQUFRRSxJQUFJLHNCQUF3QnZCLE9BQU93QixXQUFXLEVBRXREZixhQUFlTSxFQUFHQyxzQkFBc0IsRUFBRUcsT0FDMUNFLFFBQVFFLElBQUkscUJBQXVCZCxZQUFZLEVBQy9DRixxQkFBdUJELGVBQWVVLHNCQUFzQixFQUFFRyxPQUM5REUsUUFBUUUsSUFBSSxrQkFBb0JoQixvQkFBb0IsRUFDcERHLGlCQUFtQkQsYUFBZUYscUJBQ2xDYyxRQUFRRSxJQUFJLG1CQUFxQmIsZ0JBQWdCLEVBQ2pERixvQkFBc0JDLGFBQWVDLGlCQUNyQ1csUUFBUUUsSUFBSSxxQkFBdUJmLG1CQUFtQixFQUN0REcsVUFBWVgsT0FBT3dCLFlBQWNoQixvQkFDakNJLGlCQUFtQmEsU0FBU25CLGVBQWVvQixNQUFNQyxVQUFVQyxNQUFNLGdCQUFnQixDQUFDLEVBQ2xGUCxRQUFRRSxJQUFJLHVCQUF5QlgsZ0JBQWdCLEVBSWpEQSxpQkFBbUJGLGtCQUNqQlYsT0FBT3dCLFlBQWNkLGtCQUNyQlYsT0FBT3dCLFlBQWNaLG1CQUN4QlosT0FBT3dCLFlBQWNmLGVBRXJCSCxlQUFlb0IsTUFBTUMsd0JBQTBCaEIsZUFHeEQsQ0FBQyxDQUNKLENBNUNBVSxRQUFRRSxJQUFJbEIsZUFBZSxFQUUzQkEsZ0JBQWdCUyxRQUFRLElBQ3JCQyxFQUFHVyxNQUFNQyxVQUFZLGlCQUN4QixDQUFDLEVBQ0R4QixTQUFTIn0=
